<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>mcfeedback — Iteration 15: modCycling + radius anneal + provisional weights</title>
<style>
  body { font-family: 'Segoe UI', system-ui, sans-serif; background: #0f0f13; color: #e0e0e0; max-width: 960px; margin: 0 auto; padding: 2rem; }
  h1 { color: #7eb8f7; font-size: 1.4rem; border-bottom: 1px solid #2a2a3a; padding-bottom: 0.5rem; }
  h2 { color: #a0c4ff; font-size: 1.1rem; margin-top: 2rem; }
  pre { background: #16161e; border: 1px solid #2a2a3a; border-radius: 6px; padding: 1rem; overflow-x: auto; font-size: 0.82rem; line-height: 1.5; }
  table { border-collapse: collapse; width: 100%; margin: 1rem 0; font-size: 0.88rem; }
  th { background: #1e1e2e; color: #a0c4ff; padding: 0.5rem 0.8rem; text-align: left; border-bottom: 2px solid #3a3a5a; }
  td { padding: 0.45rem 0.8rem; border-bottom: 1px solid #1e1e2e; }
  tr:hover td { background: #1a1a28; }
  .good { color: #6fcf97; }
  .bad { color: #eb5757; }
  .neutral { color: #b0b0c0; }
  .highlight { color: #f6c90e; font-weight: bold; }
  .tag { display: inline-block; padding: 0.15rem 0.5rem; border-radius: 4px; font-size: 0.78rem; font-weight: bold; }
  .tag-new { background: #1b3a4a; color: #7eb8f7; }
  .tag-bad { background: #4a1b1b; color: #eb5757; }
  .verdict { background: #1a1a28; border-left: 4px solid #eb5757; padding: 1rem 1.2rem; border-radius: 0 6px 6px 0; margin: 1.5rem 0; }
  .verdict h3 { color: #eb5757; margin-top: 0; }
  .mech-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem; margin: 1rem 0; }
  .mech-cell { background: #16161e; border: 1px solid #2a2a3a; border-radius: 6px; padding: 0.8rem; }
  .mech-cell h3 { color: #a0c4ff; font-size: 0.88rem; margin: 0 0 0.5rem; }
  .comparison-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin: 1rem 0; }
  .cg-cell { background: #16161e; border: 1px solid #2a2a3a; border-radius: 6px; padding: 0.8rem; }
  .cg-label { font-size: 0.75rem; color: #808098; text-transform: uppercase; letter-spacing: 0.05em; }
  .cg-value { font-size: 1.5rem; font-weight: bold; margin: 0.3rem 0 0; }
  code { background: #16161e; border: 1px solid #2a2a3a; border-radius: 3px; padding: 0.1rem 0.3rem; font-size: 0.82rem; }
  .sig { color: #eb5757; font-weight: bold; }
  .isolation-box { background: #0d1a2a; border: 1px solid #1b3a5a; border-radius: 6px; padding: 1rem 1.2rem; margin: 1rem 0; }
  .isolation-box h3 { color: #7eb8f7; margin-top: 0; }
</style>
</head>
<body>

<h1>mcfeedback — Iteration 15: modCycling + radius anneal + provisional weights</h1>

<p>
  <span class="tag tag-new">3 NEW MECHANISMS</span>
  &nbsp;<span class="tag tag-bad">REGRESSION vs 012b</span>
  &nbsp;Base: experiment-012b (exp-004 + weightDecay=0.0025).
  Three new mechanisms added simultaneously. 10 seeds × 1000 episodes × 4 conditions.
</p>

<div class="mech-grid">
  <div class="mech-cell">
    <h3>1. modCycling</h3>
    <p style="font-size:0.82rem;color:#b0b0c0;margin:0">One of 4 modulatory neurons fires per step, round-robin (previously all 4 fired together). Chemical broadcast originates from one spatial location per step.</p>
  </div>
  <div class="mech-cell">
    <h3>2. Radius annealing</h3>
    <p style="font-size:0.82rem;color:#b0b0c0;margin:0">chemicalDiffusionRadius: 15 → 5 linearly over 1000 episodes. Starts broad (global reward), narrows to local (targeted plasticity).</p>
  </div>
  <div class="mech-cell">
    <h3>3. Provisional weights</h3>
    <p style="font-size:0.82rem;color:#b0b0c0;margin:0">Each weight update is provisional. On the next step: if accuracy ≥ previous → commit. If accuracy dropped → revert all synapses to pre-update values.</p>
  </div>
</div>

<h2>Config</h2>
<pre>learningRate:                0.01    (exp-004 original)
weightDecay:                 0.0025  (012b fix)
flagStrengthGain:            0.3
flagDecayRate:               0.7
flagStrengthThreshold:       0.5
modCycling:                  true    ← new
chemicalDiffusionRadius:     15 → 5  ← annealing (Full model only; flat 1000 for other conditions)
provisionalWeights:          true    ← new (all conditions)</pre>

<h2>Results</h2>

<div class="comparison-grid">
  <div class="cg-cell">
    <div class="cg-label">012b baseline</div>
    <div class="cg-value good">55.0%</div>
    <div style="color:#808098;font-size:0.82rem;">10/10 seeds · std 0% · |w| 0.79</div>
  </div>
  <div class="cg-cell">
    <div class="cg-label">015 Full model</div>
    <div class="cg-value bad">47.5%</div>
    <div style="color:#808098;font-size:0.82rem;">2/10 seeds · std 4.2% · |w| 0.18</div>
  </div>
</div>

<h2>Distribution (frozen-weight accuracy)</h2>
<table>
  <tr><th>Condition</th><th>Mean</th><th>Std</th><th>Min</th><th>Max</th><th>All seeds</th></tr>
  <tr>
    <td>Baseline</td>
    <td>51.5%</td><td>4.7%</td><td class="bad">45%</td><td class="good">55%</td>
    <td class="neutral">45 55 45 45 50 55 55 55 55 55</td>
  </tr>
  <tr>
    <td>Ambient only</td>
    <td>51.0%</td><td>5.2%</td><td class="bad">45%</td><td class="good">55%</td>
    <td class="neutral">55 55 45 55 45 45 55 45 55 55</td>
  </tr>
  <tr>
    <td>Dampening only</td>
    <td>51.5%</td><td>5.8%</td><td class="bad">40%</td><td class="good">55%</td>
    <td class="neutral">55 55 45 55 55 55 55 40 55 45</td>
  </tr>
  <tr>
    <td>Full model</td>
    <td class="bad">47.5%</td><td>4.2%</td><td class="bad">45%</td><td class="good">55%</td>
    <td class="neutral">45 50 45 55 45 45 45 45 55 45</td>
  </tr>
</table>
<p style="font-size:0.82rem;color:#808098;">
  Even the Baseline condition (no ambient, no dampening, flat chemical) drops from 55% → 51.5%.
  This means modCycling + provisionalWeights alone hurts before adding radius annealing.
  Notably, Dampening-only was 10/10 at 55% in every prior experiment — here it's 51.5%.
</p>

<h2>Paired t-tests vs Baseline</h2>
<table>
  <tr><th>Comparison</th><th>Mean diff</th><th>t</th><th>p</th><th>Significant?</th></tr>
  <tr><td>Ambient only vs Baseline</td><td>−0.5%</td><td>−0.2308</td><td>0.6071</td><td class="neutral">ns</td></tr>
  <tr><td>Dampening only vs Baseline</td><td>+0.0%</td><td>0.0000</td><td>1.0000</td><td class="neutral">ns</td></tr>
  <tr><td>Full model vs Baseline</td><td class="bad">−4.0%</td><td>−1.9215</td><td>0.0641</td><td class="neutral">ns (p≈0.06)</td></tr>
</table>
<p style="font-size:0.82rem;color:#808098;">
  Full model is marginally significant (p=0.064). The full model is pulled down by radius annealing
  on top of the already-degraded baseline.
</p>

<h2>Per-pattern mean accuracy (across seeds)</h2>
<table>
  <tr><th>Condition</th><th>P1</th><th>P2</th><th>P3</th><th>P4</th></tr>
  <tr><td>Baseline</td><td>50.0%</td><td>50.0%</td><td>54.0%</td><td>52.0%</td></tr>
  <tr><td>Ambient only</td><td>48.0%</td><td>52.0%</td><td>52.0%</td><td>52.0%</td></tr>
  <tr><td>Dampening only</td><td>44.0%</td><td>52.0%</td><td>58.0%</td><td>52.0%</td></tr>
  <tr><td>Full model</td><td>54.0%</td><td>50.0%</td><td class="bad">44.0%</td><td class="bad">42.0%</td></tr>
</table>
<p style="font-size:0.82rem;color:#808098;">
  The prior experiments all showed P1≈40%, P2/P3/P4≈60%. Here the pattern is scrambled —
  P1 at 54% in Full model, P3/P4 at 42-44%. The provisional revert mechanism is
  destabilising the 55% attractor rather than helping escape it.
</p>

<h2>Full model: per-seed weight &amp; revert stats</h2>
<table>
  <tr><th>Seed</th><th>Accuracy</th><th>Mean |weight|</th><th>Revert rate</th><th>Note</th></tr>
  <tr><td>42</td><td class="bad">45%</td><td class="bad">0.2182</td><td>33.4%</td><td></td></tr>
  <tr><td>137</td><td class="bad">50%</td><td class="bad">0.2432</td><td>32.2%</td><td></td></tr>
  <tr><td>271</td><td class="bad">45%</td><td class="bad">0.2559</td><td>37.3%</td><td></td></tr>
  <tr><td>314</td><td class="good">55%</td><td class="bad">0.1626</td><td>34.1%</td><td class="neutral">good acc, still low |w|</td></tr>
  <tr><td>500</td><td class="bad">45%</td><td class="bad">0.1434</td><td>33.0%</td><td></td></tr>
  <tr><td>618</td><td class="bad">45%</td><td class="bad">0.1882</td><td>37.4%</td><td></td></tr>
  <tr><td>777</td><td class="bad">45%</td><td class="bad">0.1367</td><td>33.8%</td><td></td></tr>
  <tr><td>888</td><td class="bad">45%</td><td class="bad">0.1551</td><td>36.8%</td><td></td></tr>
  <tr><td>999</td><td class="good">55%</td><td class="bad">0.1352</td><td>31.7%</td><td></td></tr>
  <tr><td>1234</td><td class="bad">45%</td><td class="bad">0.1743</td><td>31.9%</td><td></td></tr>
</table>
<table>
  <tr><th>Group</th><th>Seeds</th><th>Mean |weight|</th><th>Mean revert rate</th></tr>
  <tr><td class="good">Good (≥55%)</td><td class="bad">2/10</td><td class="bad">0.1489</td><td>32.9%</td></tr>
  <tr><td class="bad">Poor (&lt;55%)</td><td class="bad">8/10</td><td class="bad">0.1894</td><td>34.5%</td></tr>
</table>

<h2>Weight starvation diagnosis</h2>

<p>Mean |weight| = <strong>0.18</strong> across all seeds — a 77% drop from 012b's 0.79. All three mechanisms contribute to this:</p>

<table>
  <tr><th>Mechanism</th><th>Effect on weight accumulation</th></tr>
  <tr>
    <td><strong>Provisional reverts (~33%)</strong></td>
    <td>One in three steps has its weight update fully reversed. Effective learning rate is cut by ~33%, pushing balance toward decay.</td>
  </tr>
  <tr>
    <td><strong>Radius annealing (15→5)</strong></td>
    <td>By episode 500, radius is 10. By episode 1000, radius is 5. Synapses beyond distance 5 from the active modulatory neuron receive zero chemical signal and stop learning entirely.</td>
  </tr>
  <tr>
    <td><strong>mod cycling (1 of 4)</strong></td>
    <td>Each step, 3 of 4 modulatory neurons are silent. Each cluster's modulatory neurons fire only 25% of steps on average, reducing chemical dosage by 4×.</td>
  </tr>
</table>

<p>Combined: effective learning is ~8× weaker than 012b (4× from cycling × 33% from reverts × radius narrowing). Weight decay (0.0025/step) dominates → weights collapse toward 0.</p>

<div class="verdict">
  <h3>Verdict: all three mechanisms together cause weight starvation</h3>
  <p>
    The combination is too aggressive. Each mechanism individually might be fine, but together they reduce
    the effective learning signal by roughly an order of magnitude, while weight decay remains unchanged.
    Mean |weight| = 0.18 (vs 0.79 in 012b) — the network barely develops meaningful synaptic structure.
  </p>
  <p>
    The provisional revert rate of ~33% is the smoking gun: at random chance, 50% of steps would show
    improved reward and 50% wouldn't, giving ~50% reverts. The observed 33% means the network is doing
    <em>slightly</em> better than chance on rewarded steps — but not enough to overcome the effective
    learning rate reduction combined with radius annealing and modCycling.
  </p>
  <p>
    The per-pattern scrambling (P1=54%, P3/P4=42%) confirms the network is exploring multiple attractor
    basins without settling into any of them stably — consistent with continuous reverts preventing
    convergence.
  </p>
</div>

<div class="isolation-box">
  <h3>Next: isolate each mechanism</h3>
  <p>To understand which mechanism is the bottleneck, test individually against 012b:</p>
  <ul>
    <li><strong>015a</strong> — modCycling only (no anneal, no provisional)</li>
    <li><strong>015b</strong> — provisionalWeights only (no anneal, no cycling)</li>
    <li><strong>015c</strong> — radius anneal only (no cycling, no provisional)</li>
    <li><strong>015d</strong> — modCycling + provisional (no anneal) — test if the pair works at full radius</li>
  </ul>
  <p>
    Hypothesis: radius annealing is the primary culprit (cuts chemical to most synapses by episode 500+),
    with provisional reverts adding a secondary effect. modCycling alone is likely tolerable.
  </p>
  <p>
    If modCycling + provisional are tolerable individually, consider a weaker anneal
    (e.g., 15→10 instead of 15→5) or starting provisional only after warmup (e.g., episode 200+).
  </p>
</div>

<h2>Summary: 012b vs 015</h2>
<table>
  <tr><th></th><th>012b</th><th>015</th><th>Δ</th></tr>
  <tr><td>Mean accuracy (Full)</td><td class="good">55.0%</td><td class="bad">47.5%</td><td class="bad">−7.5%</td></tr>
  <tr><td>Std</td><td class="good">0.0%</td><td>4.2%</td><td class="bad">+4.2%</td></tr>
  <tr><td>Seeds ≥ 55%</td><td class="good">10/10</td><td class="bad">2/10</td><td class="bad">−8/10</td></tr>
  <tr><td>Mean |weight|</td><td class="good">0.7898</td><td class="bad">0.1813</td><td class="bad">−77%</td></tr>
  <tr><td>Revert rate</td><td>—</td><td class="bad">~33%</td><td></td></tr>
</table>

<p style="color:#505060;font-size:0.78rem;margin-top:3rem;">
  Generated 2026-02-22 · mcfeedback experiment-015 · 10 seeds × 1000 episodes × 4 conditions
</p>

</body>
</html>
